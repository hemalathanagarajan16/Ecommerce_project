<div class ="image-bg">
<section class="hero">
  <div class="scrolling-banner">
    <div class="scrolling-content">
      <span class="offer highlight">üî• Mega Sale - Up to 50% Off!</span>
      <span class="offer">üíª Laptops starting at $799</span>
      <span class="offer">üéß Free Headphones on select items</span>
      <span class="offer highlight">‚åö Smartwatches - New arrivals!</span>
      <span class="offer">üöö Free Shipping on all orders</span>
    </div>
</div>
 
</section>

<div class="search-bar">
  <input type="text" placeholder="Search products..." 
         class="px-3 py-2 rounded text-black" 
         (input)="onSearch($event.target.value)" />

  <!-- <select class="px-3 py-2 rounded text-black" 
          (change)="onSort($event.target.value)">
    <option value="relevance">Sort: Relevance</option>
    <option value="priceAsc">Price: Low to High</option>
    <option value="priceDesc">Price: High to Low</option>
    <option value="ratingDesc">Rating: High to Low</option>
  </select> -->

  <input type="number" placeholder="Min $" 
         class="px-2 py-2 rounded text-black" style="width:100px" 
         (input)="priceMin = $any($event.target).valueAsNumber; applySearchAndSort()" />

  <input type="number" placeholder="Max $" 
         class="px-2 py-2 rounded text-black" style="width:100px" 
         (input)="priceMax = $any($event.target).valueAsNumber; applySearchAndSort()" />


  @for (category of categories; track category) {
    <button class="btn-outline" 
            (click)="filterByCategory(category)" 
            [class.active]="category === selectedCategory">
      {{ category }}
    </button>
  }
</div>
 
<div class="grid" style="padding: 0 16px 24px 16px;">
  
  @for (product of filteredProducts; track product.id) {
    <div class="card">

        <img [src]="product.imageUrl"
             [alt]="product.name"
             title="View details"
             loading="lazy"
             decoding="async"
             referrerpolicy="no-referrer"

              />
      <div class="card-body">
        <div class="name" title="{{ product.name }}">{{ product.name }}</div>
        <div class="desc">{{ product.description }}</div>
        <div class="meta">
          <div class="price">${{ product.price }}</div>
          <div class="rating" *ngIf="product.rating" title="Average rating">‚≠ê {{ product.rating }}</div>
        </div>
        <div class="stock" style="font-size: 12px; color:#cbd5e1; display:flex; gap:8px; align-items:center;">
          <span class="badge">{{ product.category }}</span>
          @if (product.stock && product.stock > 0) { <span>In stock: {{ product.stock }}</span> } @else { <span style="color:#f87171;">Out of stock</span> }
        </div>
        <div class="actions">
          <a [routerLink]="['/product', product.id]" class="btn-outline">View</a>
          <button class="btn" (click)="addToCart(product)" [disabled]="!product.stock || product.stock <= 0" title="Add to cart">Add to Cart</button>
          <button class="btn-outline" (click)="toggleWishlist(product.id)" title="Toggle wishlist">{{ wishlist.has(product.id) ? '‚ô• Wishlisted' : '‚ô° Wishlist' }}</button>
        </div>
      </div>
    </div>
  }
  @if (filteredProducts.length === 0) {
    <div class="empty-state">No products found. Try adjusting filters.</div>
  }
</div>
</div>